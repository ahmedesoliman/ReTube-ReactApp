{"ast":null,"code":"import _objectSpread from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from\"react\";import ControlBar from\"./ControlBar\";import LoadingSpinner from\"./LoadingSpinner\";import ComingNext from\"./ComingNext\";import Shortcut from\"./Shortcut\";import Video from\"./Video\";import FullVideoProvider from\"./Provider\";import{FullVideoStyled,TitleStyled}from\"./styles\";import BigPlayButton from\"./BigPlayButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FullVideo=/*#__PURE__*/function(_React$Component){_inherits(FullVideo,_React$Component);var _super=_createSuper(FullVideo);function FullVideo(){var _this;_classCallCheck(this,FullVideo);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.video=void 0;_this.controlsHideTimer=void 0;_this.startControlsTimer=function(){var userActivate=_this.props.userActivate;userActivate(true);clearTimeout(_this.controlsHideTimer);_this.controlsHideTimer=setTimeout(function(){userActivate(false);},1500);};_this.handleFocus=function(){_this.props.playerActivate(true);};_this.handleBlur=function(){_this.props.playerActivate(false);};return _this;}_createClass(FullVideo,[{key:\"render\",value:function render(){var _this2=this;var provider=this.props.provider;var fullscreen=provider.fullscreen,userActivity=provider.userActivity,paused=provider.paused;var _this$props$currentVi=this.props.currentVideoClip,src=_this$props$currentVi.src,id=_this$props$currentVi.id,title=_this$props$currentVi.title;var existsID=id!==\"\";var showControls=this.props.showControls&&existsID;var propsWithoutChildren=_objectSpread(_objectSpread({},this.props),{},{children:null});var propsActionChildren=_objectSpread(_objectSpread({},propsWithoutChildren),{},{video:this.video?this.video:null});return/*#__PURE__*/_jsxs(FullVideoStyled,{fullscreen:fullscreen,showControls:userActivity||paused,onTouchStart:this.startControlsTimer,onMouseDown:this.startControlsTimer,onMouseMove:this.startControlsTimer,onKeyDown:this.startControlsTimer,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[showControls&&/*#__PURE__*/_jsx(TitleStyled,{children:title}),/*#__PURE__*/_jsx(Video,_objectSpread(_objectSpread({ref:function ref(c){_this2.video=c;}},propsWithoutChildren),{},{children:/*#__PURE__*/_jsx(\"source\",{src:src+\"?id=\"+id})})),showControls&&/*#__PURE__*/_jsx(BigPlayButton,_objectSpread({},propsActionChildren)),/*#__PURE__*/_jsx(ComingNext,_objectSpread({},propsActionChildren)),showControls&&/*#__PURE__*/_jsx(LoadingSpinner,_objectSpread({},propsActionChildren)),showControls&&/*#__PURE__*/_jsx(ControlBar,_objectSpread({},propsActionChildren)),/*#__PURE__*/_jsx(Shortcut,_objectSpread({},propsActionChildren))]});}}]);return FullVideo;}(React.Component);FullVideo.defaultProps={currentVideoClip:{id:\"\",src:\"\",startTime:0},showControls:true};export default(function(props){return/*#__PURE__*/_jsx(FullVideoProvider,{children:/*#__PURE__*/_jsx(FullVideoProvider.Consumer,{children:function children(value){return/*#__PURE__*/_jsx(FullVideo,_objectSpread(_objectSpread({},props),value));}})});});","map":{"version":3,"sources":["C:/gitHub/retube-reactApp/src/components/FullVideo/FullVideo.tsx"],"names":["React","ControlBar","LoadingSpinner","ComingNext","Shortcut","Video","FullVideoProvider","FullVideoStyled","TitleStyled","BigPlayButton","FullVideo","video","controlsHideTimer","startControlsTimer","userActivate","props","clearTimeout","setTimeout","handleFocus","playerActivate","handleBlur","provider","fullscreen","userActivity","paused","currentVideoClip","src","id","title","existsID","showControls","propsWithoutChildren","children","propsActionChildren","c","Component","defaultProps","startTime","value"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport ControlBar from \"./ControlBar\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport ComingNext from \"./ComingNext\";\nimport Shortcut from \"./Shortcut\";\nimport Video from \"./Video\";\nimport { IVideoClip, IVideoClipOptional } from \"../types\";\nimport FullVideoProvider, { IFullVideoProvider } from \"./Provider\";\n\nimport { FullVideoStyled, TitleStyled } from \"./styles\";\nimport BigPlayButton from \"./BigPlayButton\";\nimport { isiOS } from \"../../utils\";\n\nexport interface IExternalProps {\n  autoPlay?: boolean;\n  showControls?: boolean;\n  autoPlaylist?: boolean;\n  currentVideoClip?: IVideoClip;\n  backVideoClip?: IVideoClip;\n  nextVideoClip?: IVideoClip;\n  onChangeTimeFragment?: (startTime: number, endTime: number) => void;\n  onChangeAutoPlaylist?: (autoPlaylist: boolean) => void;\n  onClickPlaylistAction?: (videoClip: IVideoClip) => void;\n  children?: any;\n}\n\nexport interface IProps extends IExternalProps, IFullVideoProvider {\n  currentVideoClip: IVideoClip;\n}\n\ninterface IDefaultProps {\n  currentVideoClip: IVideoClipOptional;\n  showControls: boolean;\n}\n\nexport interface IPropsChildrens extends IProps {\n  video: any;\n}\n\nclass FullVideo extends React.Component<IProps> {\n  public static defaultProps: IDefaultProps = {\n    currentVideoClip: {\n      id: \"\",\n      src: \"\",\n      startTime: 0\n    },\n    showControls: true\n  };\n\n  public video: Video;\n  public controlsHideTimer: any;\n\n  public startControlsTimer = () => {\n    const { userActivate } = this.props;\n    userActivate(true);\n    clearTimeout(this.controlsHideTimer);\n    this.controlsHideTimer = setTimeout(() => {\n      userActivate(false);\n    }, 1500);\n  };\n\n  public handleFocus = () => {\n    this.props.playerActivate(true);\n  };\n\n  public handleBlur = () => {\n    this.props.playerActivate(false);\n  };\n\n  public render() {\n    const provider = this.props.provider;\n    const { fullscreen, userActivity, paused } = provider;\n    const { src, id, title } = this.props.currentVideoClip;\n\n    const existsID = id !== \"\";\n\n    const showControls = this.props.showControls && existsID;\n\n    const propsWithoutChildren: IProps = {\n      ...this.props,\n      children: null\n    };\n\n    const propsActionChildren: IPropsChildrens = {\n      ...propsWithoutChildren,\n      video: this.video ? this.video : null\n    };\n\n    return (\n      <FullVideoStyled\n        fullscreen={fullscreen}\n        showControls={userActivity || paused}\n        onTouchStart={this.startControlsTimer}\n        onMouseDown={this.startControlsTimer}\n        onMouseMove={this.startControlsTimer}\n        onKeyDown={this.startControlsTimer}\n        onFocus={this.handleFocus}\n        onBlur={this.handleBlur}\n      >\n        {showControls && <TitleStyled>{title}</TitleStyled>}\n        <Video\n          ref={(c: any) => {\n            this.video = c;\n          }}\n          {...propsWithoutChildren}\n        >\n          <source src={src + \"?id=\" + id} />\n        </Video>\n        {showControls && <BigPlayButton {...propsActionChildren} />}\n        <ComingNext {...propsActionChildren} />\n        {showControls && <LoadingSpinner {...propsActionChildren} />}\n        {showControls && <ControlBar {...propsActionChildren} />}\n        <Shortcut {...propsActionChildren} />\n      </FullVideoStyled>\n    );\n  }\n}\n\nexport default (props: IExternalProps | any) => (\n  <FullVideoProvider>\n    <FullVideoProvider.Consumer>\n      {(value: any) => <FullVideo {...props} {...value} />}\n    </FullVideoProvider.Consumer>\n  </FullVideoProvider>\n);\n"]},"metadata":{},"sourceType":"module"}