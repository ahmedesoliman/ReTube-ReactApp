{"ast":null,"code":"import _objectSpread from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/gitHub/retube-reactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from\"react\";import*as ReactDOM from\"react-dom\";import{setStorage,getStorage}from\"../../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";var Context=/*#__PURE__*/React.createContext({});var KEY_LOCALSTORAGE=\"dbVolumeReact\";var FullVideoProvider=/*#__PURE__*/function(_React$Component){_inherits(FullVideoProvider,_React$Component);var _super=_createSuper(FullVideoProvider);function FullVideoProvider(props){var _this;_classCallCheck(this,FullVideoProvider);_this=_super.call(this,props);_this.toggleFullscreen=function(video){var videoElement=ReactDOM.findDOMNode(video);var fullscreen=_this.state.fullscreen;if(fullscreen){if(document.exitFullscreen){document.exitFullscreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}_this.setState({fullscreen:false});}else{if(videoElement&&videoElement.parentElement){var fullvideoElement=videoElement.parentElement;if(fullvideoElement.requestFullscreen){fullvideoElement.requestFullscreen();}else if(fullvideoElement.webkitRequestFullscreen){fullvideoElement.webkitRequestFullscreen();}_this.setState({fullscreen:true});}}};_this.editing=function(editActive){_this.setState({editActive:editActive});};_this.editingValues=function(editActive){_this.setState(editActive);};_this.userActivate=function(userActivity){_this.setState({userActivity:userActivity});};_this.playerActivate=function(isActive){_this.setState({isActive:isActive});};_this.seekingTime=function(time){_this.setState({seekingTime:time});};_this.endSeeking=function(){_this.setState({seekingTime:0});};_this.onLoadStart=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{editActive:false,ended:false,hasStarted:false,waiting:true}));};_this.canPlay=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{waiting:false}));};_this.waiting=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{waiting:true}));};_this.playing=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{waiting:false}));};_this.play=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{autoPaused:false,ended:false,hasStarted:true,paused:false,waiting:false}));};_this.pause=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{paused:true}));};_this.end=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{ended:true}));};_this.seeking=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{seeking:true}));};_this.seeked=function(videoProps){_this.setState(_objectSpread(_objectSpread({},videoProps),{},{seeking:false}));};_this.changeVolume=function(videoProps){_this.setState(_objectSpread(_objectSpread({},_this.state),videoProps),_this.updateStorage);};_this.reload=function(videoProps){var newState=_objectSpread(_objectSpread({},_this.state),videoProps);if(videoProps.paused===false){newState.hasStarted=true;newState.waiting=false;}_this.setState(newState);};_this.updateStorage=function(){setStorage(KEY_LOCALSTORAGE,_this.state.volume);};var volume;var volumeCache=getStorage(KEY_LOCALSTORAGE);if(volumeCache!==undefined){volume=volumeCache;}else{volume=1;setStorage(KEY_LOCALSTORAGE,volume);}_this.state={autoPaused:false,buffered:null,currentSrc:null,currentTime:0,duration:0,editActive:false,editMax:0,editMin:0,ended:false,fullscreen:false,hasStarted:false,isActive:false,muted:false,paused:true,readyState:0,seeking:false,seekingTime:0,userActivity:false,video:null,videoHeight:0,videoWidth:0,volume:volume,waiting:false};return _this;}_createClass(FullVideoProvider,[{key:\"render\",value:function render(){var value={canPlay:this.canPlay,changeVolume:this.changeVolume,editing:this.editing,editingValues:this.editingValues,end:this.end,endSeeking:this.endSeeking,onLoadStart:this.onLoadStart,pause:this.pause,play:this.play,playerActivate:this.playerActivate,playing:this.playing,provider:this.state,reload:this.reload,seeked:this.seeked,seeking:this.seeking,seekingTime:this.seekingTime,toggleFullscreen:this.toggleFullscreen,userActivate:this.userActivate,waiting:this.waiting};return/*#__PURE__*/_jsx(Context.Provider,_objectSpread({value:value},this.props));}}]);return FullVideoProvider;}(React.Component);FullVideoProvider.Consumer=Context.Consumer;export{FullVideoProvider as default};","map":{"version":3,"sources":["C:/gitHub/retube-reactApp/src/components/FullVideo/Provider.tsx"],"names":["React","ReactDOM","setStorage","getStorage","Context","createContext","KEY_LOCALSTORAGE","FullVideoProvider","props","toggleFullscreen","video","videoElement","findDOMNode","fullscreen","state","document","exitFullscreen","webkitExitFullscreen","setState","parentElement","fullvideoElement","requestFullscreen","webkitRequestFullscreen","editing","editActive","editingValues","userActivate","userActivity","playerActivate","isActive","seekingTime","time","endSeeking","onLoadStart","videoProps","ended","hasStarted","waiting","canPlay","playing","play","autoPaused","paused","pause","end","seeking","seeked","changeVolume","updateStorage","reload","newState","volume","volumeCache","undefined","buffered","currentSrc","currentTime","duration","editMax","editMin","muted","readyState","videoHeight","videoWidth","value","provider","Component","Consumer"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport Video from \"./Video\";\nimport { setStorage, getStorage } from \"../../utils\";\n\nconst Context = React.createContext({});\n\nconst KEY_LOCALSTORAGE = \"dbVolumeReact\";\n\ninterface IState {\n  autoPaused: boolean;\n  buffered: any;\n  currentSrc: any;\n  currentTime: number;\n  duration: number;\n  editActive: boolean;\n  editMax: number;\n  editMin: number;\n  ended: boolean;\n  fullscreen: boolean;\n  hasStarted: boolean;\n  isActive: boolean;\n  muted: boolean;\n  paused: boolean;\n  readyState: number;\n  seeking: boolean;\n  seekingTime: number;\n  userActivity: boolean;\n  video: any;\n  videoHeight: number;\n  videoWidth: number;\n  volume: number;\n  waiting: boolean;\n}\n\nexport interface IFullVideoProvider {\n  provider: IState;\n  editing: (ob: boolean) => any;\n  changeVolume: (ob: any) => any;\n  editingValues: (ob: any) => any;\n  userActivate: (ob: boolean) => any;\n  playerActivate: (ob: boolean) => any;\n  seekingTime: (ob: number) => any;\n  endSeeking: () => any;\n  toggleFullscreen: (video: Video) => any;\n  onLoadStart: (ob: any) => any;\n  canPlay: (ob: any) => any;\n  waiting: (ob: any) => any;\n  playing: (ob: any) => any;\n  play: (ob: any, autoPlay?: boolean) => any;\n  pause: (ob: any) => any;\n  end: (ob: any) => any;\n  seeked: (ob: any) => any;\n  seeking: (ob: any) => any;\n  reload: (ob: any) => any;\n}\n\nexport default class FullVideoProvider extends React.Component<any, IState> {\n  public static Consumer = Context.Consumer;\n\n  constructor(props: any) {\n    super(props);\n\n    let volume: number;\n    const volumeCache = getStorage(KEY_LOCALSTORAGE);\n    if (volumeCache !== undefined) {\n      volume = volumeCache;\n    } else {\n      volume = 1;\n      setStorage(KEY_LOCALSTORAGE, volume);\n    }\n    this.state = {\n      autoPaused: false,\n      buffered: null,\n      currentSrc: null,\n      currentTime: 0,\n      duration: 0,\n      editActive: false,\n      editMax: 0,\n      editMin: 0,\n      ended: false,\n      fullscreen: false,\n      hasStarted: false,\n      isActive: false,\n      muted: false,\n      paused: true,\n      readyState: 0,\n      seeking: false,\n      seekingTime: 0,\n      userActivity: false,\n      video: null,\n      videoHeight: 0,\n      videoWidth: 0,\n      volume,\n      waiting: false\n    };\n  }\n\n  public toggleFullscreen = (video: Video) => {\n    const videoElement = ReactDOM.findDOMNode(video);\n    const fullscreen = this.state.fullscreen;\n    if (fullscreen) {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      }\n      this.setState({ fullscreen: false });\n    } else {\n      if (videoElement && videoElement.parentElement) {\n        const fullvideoElement = videoElement.parentElement;\n        if (fullvideoElement.requestFullscreen) {\n          fullvideoElement.requestFullscreen();\n        } else if (fullvideoElement.webkitRequestFullscreen) {\n          fullvideoElement.webkitRequestFullscreen();\n        }\n        this.setState({ fullscreen: true });\n      }\n    }\n  };\n\n  public editing = (editActive: boolean) => {\n    this.setState({ editActive });\n  };\n\n  public editingValues = (editActive: { editMin: number; editMax: number }) => {\n    this.setState(editActive);\n  };\n\n  public userActivate = (userActivity: boolean) => {\n    this.setState({ userActivity });\n  };\n\n  public playerActivate = (isActive: boolean) => {\n    this.setState({ isActive });\n  };\n\n  public seekingTime = (time: number) => {\n    this.setState({ seekingTime: time });\n  };\n\n  public endSeeking = () => {\n    this.setState({ seekingTime: 0 });\n  };\n\n  public onLoadStart = (videoProps: any) => {\n    this.setState({\n      ...videoProps,\n      editActive: false,\n      ended: false,\n      hasStarted: false,\n      waiting: true\n    });\n  };\n\n  public canPlay = (videoProps: any) => {\n    this.setState({ ...videoProps, waiting: false });\n  };\n\n  public waiting = (videoProps: any) => {\n    this.setState({ ...videoProps, waiting: true });\n  };\n\n  public playing = (videoProps: any) => {\n    this.setState({ ...videoProps, waiting: false });\n  };\n\n  public play = (videoProps: any) => {\n    this.setState({\n      ...videoProps,\n      autoPaused: false,\n      ended: false,\n      hasStarted: true,\n      paused: false,\n      waiting: false\n    });\n  };\n\n  public pause = (videoProps: any) => {\n    this.setState({ ...videoProps, paused: true });\n  };\n\n  public end = (videoProps: any) => {\n    this.setState({ ...videoProps, ended: true });\n  };\n\n  public seeking = (videoProps: any) => {\n    this.setState({ ...videoProps, seeking: true });\n  };\n\n  public seeked = (videoProps: any) => {\n    this.setState({ ...videoProps, seeking: false });\n  };\n\n  public changeVolume = (videoProps: any) => {\n    this.setState(\n      {\n        ...this.state,\n        ...videoProps\n      },\n      this.updateStorage\n    );\n  };\n\n  public reload = (videoProps: any) => {\n    const newState = {\n      ...this.state,\n      ...videoProps\n    };\n    if (videoProps.paused === false) {\n      newState.hasStarted = true;\n      newState.waiting = false;\n    }\n    this.setState(newState);\n  };\n\n  public render() {\n    const value: IFullVideoProvider = {\n      canPlay: this.canPlay,\n      changeVolume: this.changeVolume,\n      editing: this.editing,\n      editingValues: this.editingValues,\n      end: this.end,\n      endSeeking: this.endSeeking,\n      onLoadStart: this.onLoadStart,\n      pause: this.pause,\n      play: this.play,\n      playerActivate: this.playerActivate,\n      playing: this.playing,\n      provider: this.state,\n      reload: this.reload,\n      seeked: this.seeked,\n      seeking: this.seeking,\n      seekingTime: this.seekingTime,\n      toggleFullscreen: this.toggleFullscreen,\n      userActivate: this.userActivate,\n      waiting: this.waiting\n    };\n    return <Context.Provider value={value} {...this.props} />;\n  }\n\n  private updateStorage = () => {\n    setStorage(KEY_LOCALSTORAGE, this.state.volume);\n  };\n}\n"]},"metadata":{},"sourceType":"module"}