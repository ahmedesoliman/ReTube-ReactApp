{"ast":null,"code":"import*as React from\"react\";import Switch from\"rc-switch\";import FullVideo from\"../FullVideo/FullVideo\";import Playlist,{PlaylistHeader}from\"../Playlist/Playlist\";import{PlaylistHeadButtonStyled,PlaylistSwitchStyled}from\"../Playlist/styles\";import{VideoPlayStyled}from\"./styles\";import{isTypeEqual,findVideoClipIndexForId,getPlaylistActions}from\"../../utils\";import{LayoutFullVideo}from\"../styles\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VideoPlayer=function VideoPlayer(props){var handleChangeTimeFragment=function handleChangeTimeFragment(startTime,endTime){var onChangeVideoClip=props.onChangeVideoClip,idSelected=props.idSelected;onChangeVideoClip(idSelected,{startTime:startTime,endTime:endTime});};var handleClickPlaylistItem=function handleClickPlaylistItem(id){var onChangeSelected=props.onChangeSelected;document.body.scrollTop=0;document.documentElement.scrollTop=0;onChangeSelected(id);};var handlePlaylistAction=function handlePlaylistAction(videoClip){var onChangeSelected=props.onChangeSelected;onChangeSelected(videoClip.id);};var getPlaylistChildren=function getPlaylistChildren(child){var onChangeAutoPlaylist=props.onChangeAutoPlaylist,repeat=props.repeat,onChangeRepeat=props.onChangeRepeat,autoPlaylist=props.autoPlaylist,random=props.random,onChangeRandom=props.onChangeRandom;var children=React.Children.toArray(child.props.children);children.unshift(/*#__PURE__*/_jsxs(PlaylistHeader,{children:[/*#__PURE__*/_jsxs(PlaylistSwitchStyled,{children:[/*#__PURE__*/_jsx(Switch,{checked:autoPlaylist,onChange:onChangeAutoPlaylist}),/*#__PURE__*/_jsx(\"span\",{children:\" Autoplay\"})]}),/*#__PURE__*/_jsxs(PlaylistHeadButtonStyled,{active:repeat,onClick:onChangeRepeat.bind(null,!repeat),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-redo-alt\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Loop\"})]}),/*#__PURE__*/_jsxs(PlaylistHeadButtonStyled,{active:random,onClick:onChangeRandom.bind(null,!random),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-random\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Random\"})]})]}));return children;};var renderChildren=function renderChildren(){var playlist=props.playlist,idSelected=props.idSelected,autoPlaylist=props.autoPlaylist,repeat=props.repeat,random=props.random,onChangeAutoPlaylist=props.onChangeAutoPlaylist;return React.Children.toArray(props.children).map(function(child){// Take all Playlist components\nif(isTypeEqual(child,Playlist)){var newProps={children:getPlaylistChildren(child),idSelected:idSelected,onClick:handleClickPlaylistItem,playlist:playlist};return/*#__PURE__*/React.cloneElement(child,newProps);}// Take all FullVideo components\nif(isTypeEqual(child,FullVideo)||isTypeEqual(child,LayoutFullVideo)){var index=findVideoClipIndexForId(playlist,idSelected);var _getPlaylistActions=getPlaylistActions(index,playlist,repeat,random),nextVideoClip=_getPlaylistActions.nextVideoClip,backVideoClip=_getPlaylistActions.backVideoClip,currentVideoClip=_getPlaylistActions.currentVideoClip;var _newProps={autoPlay:true,autoPlaylist:nextVideoClip?autoPlaylist:false,backVideoClip:backVideoClip,currentVideoClip:currentVideoClip,nextVideoClip:nextVideoClip,onChangeAutoPlaylist:onChangeAutoPlaylist,onChangeTimeFragment:handleChangeTimeFragment,onClickPlaylistAction:handlePlaylistAction};return/*#__PURE__*/React.cloneElement(child,_newProps);}return null;});};return/*#__PURE__*/_jsx(VideoPlayStyled,{children:renderChildren()});};export default VideoPlayer;","map":{"version":3,"sources":["C:/gitHub/retube-reactApp/src/components/VideoPlayer/VideoPlayer.tsx"],"names":["React","Switch","FullVideo","Playlist","PlaylistHeader","PlaylistHeadButtonStyled","PlaylistSwitchStyled","VideoPlayStyled","isTypeEqual","findVideoClipIndexForId","getPlaylistActions","LayoutFullVideo","VideoPlayer","props","handleChangeTimeFragment","startTime","endTime","onChangeVideoClip","idSelected","handleClickPlaylistItem","id","onChangeSelected","document","body","scrollTop","documentElement","handlePlaylistAction","videoClip","getPlaylistChildren","child","onChangeAutoPlaylist","repeat","onChangeRepeat","autoPlaylist","random","onChangeRandom","children","Children","toArray","unshift","bind","renderChildren","playlist","map","newProps","onClick","cloneElement","index","nextVideoClip","backVideoClip","currentVideoClip","autoPlay","onChangeTimeFragment","onClickPlaylistAction"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Switch from \"rc-switch\";\nimport FullVideo, {\n  IExternalProps as IFullVideoProps\n} from \"../FullVideo/FullVideo\";\nimport Playlist, {\n  IPropsExternal as IPlaylistProps,\n  PlaylistHeader\n} from \"../Playlist/Playlist\";\nimport {\n  PlaylistHeadButtonStyled,\n  PlaylistSwitchStyled\n} from \"../Playlist/styles\";\nimport { VideoPlayStyled } from \"./styles\";\nimport {\n  isTypeEqual,\n  findVideoClipIndexForId,\n  getPlaylistActions\n} from \"../../utils\";\nimport { IVideoClip, IVideoClipOptional } from \"../types\";\nimport { LayoutFullVideo } from \"../styles\";\n\nexport interface IPropsExternal {\n  idSelected: string;\n  playlist: IVideoClip[];\n  repeat: boolean;\n  random: boolean;\n  autoPlaylist: boolean;\n  onChangeRandom: (random: boolean) => void;\n  onRemoveVideoClip: (id: string) => void;\n  onChangeRepeat: (repeat: boolean) => void;\n  onChangeAutoPlaylist: (autoPlay: boolean) => void;\n  onChangeSelected: (id: string) => void;\n  onChangeVideoClip: (id: string, playlist: IVideoClipOptional) => void;\n  children?: any;\n}\n\ninterface IProps extends IPropsExternal {\n  children?: React.ReactNode;\n}\n\nconst VideoPlayer: React.SFC<IProps> = props => {\n  const handleChangeTimeFragment = (startTime, endTime) => {\n    const { onChangeVideoClip, idSelected } = props;\n    onChangeVideoClip(idSelected, { startTime, endTime });\n  };\n\n  const handleClickPlaylistItem = (id: string) => {\n    const { onChangeSelected } = props;\n    document.body.scrollTop = 0;\n    document.documentElement.scrollTop = 0;\n    onChangeSelected(id);\n  };\n\n  const handlePlaylistAction = (videoClip: IVideoClip) => {\n    const { onChangeSelected } = props;\n    onChangeSelected(videoClip.id);\n  };\n\n  const getPlaylistChildren = child => {\n    const {\n      onChangeAutoPlaylist,\n      repeat,\n      onChangeRepeat,\n      autoPlaylist,\n      random,\n      onChangeRandom\n    } = props;\n    const children = React.Children.toArray(child.props.children);\n\n    children.unshift(\n      <PlaylistHeader>\n        <PlaylistSwitchStyled>\n          <Switch checked={autoPlaylist} onChange={onChangeAutoPlaylist} />\n          <span> Autoplay</span>\n        </PlaylistSwitchStyled>\n        <PlaylistHeadButtonStyled\n          active={repeat}\n          onClick={onChangeRepeat.bind(null, !repeat)}\n        >\n          <i className=\"fas fa-redo-alt\" />\n          <span> Loop</span>\n        </PlaylistHeadButtonStyled>\n        <PlaylistHeadButtonStyled\n          active={random}\n          onClick={onChangeRandom.bind(null, !random)}\n        >\n          <i className=\"fas fa-random\" />\n          <span> Random</span>\n        </PlaylistHeadButtonStyled>\n      </PlaylistHeader>\n    );\n\n    return children;\n  };\n\n  const renderChildren = () => {\n    const {\n      playlist,\n      idSelected,\n      autoPlaylist,\n      repeat,\n      random,\n      onChangeAutoPlaylist\n    } = props;\n\n    return React.Children.toArray(props.children).map((child: any) => {\n      // Take all Playlist components\n      if (isTypeEqual(child, Playlist)) {\n        const newProps: IPlaylistProps = {\n          children: getPlaylistChildren(child),\n          idSelected,\n          onClick: handleClickPlaylistItem,\n          playlist\n        };\n        return React.cloneElement(child, newProps);\n      }\n\n      // Take all FullVideo components\n      if (\n        isTypeEqual(child, FullVideo) ||\n        isTypeEqual(child, LayoutFullVideo)\n      ) {\n        const index = findVideoClipIndexForId(playlist, idSelected);\n\n        const {\n          nextVideoClip,\n          backVideoClip,\n          currentVideoClip\n        } = getPlaylistActions(index, playlist, repeat, random);\n\n        const newProps: IFullVideoProps = {\n          autoPlay: true,\n          autoPlaylist: nextVideoClip ? autoPlaylist : false,\n          backVideoClip,\n          currentVideoClip,\n          nextVideoClip,\n          onChangeAutoPlaylist,\n          onChangeTimeFragment: handleChangeTimeFragment,\n          onClickPlaylistAction: handlePlaylistAction\n        };\n\n        return React.cloneElement(child, newProps);\n      }\n      return null;\n    });\n  };\n\n  return <VideoPlayStyled>{renderChildren()}</VideoPlayStyled>;\n};\n\nexport default VideoPlayer;\n"]},"metadata":{},"sourceType":"module"}